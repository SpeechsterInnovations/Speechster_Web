<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Speechster X1</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="dark-mode">
  <audio id="background-audio" loop preload="auto">
    <source src="sounds/backgroundSound.mp3" type="audio/mpeg">
  </audio>
  <audio id="silence" loop src="sounds/silence.mp3"></audio>

  <noscript><p style="color:red;text-align:center">Please enable JavaScript to use Speechster X1.</p></noscript>

  <video autoplay muted loop playsinline id="background-video">
    <source src="videos/backgrounds/background.webm" type="video/webm">
    <source src="videos/backgrounds/background.mp4" type="video/mp4">
  Your browser does not support the video tag.
  </video>


  <div id="app-container">
    <!-- Auth Screen -->
    <div id="auth-screen" class="screen active">
      <h1>Welcome to Speechster X1</h1>
      <p>Please login or register to continue.</p>
      <div id="auth-forms-container">
        <form id="login-form">
          <h2>Login</h2>
          <input type="email" id="login-email" placeholder="Email" required />
          <input type="password" id="login-password" placeholder="Password" required />
          <button type="submit" class="btn">Login</button>
          <p class="auth-message" id="login-message"></p>
        </form>

        <hr />

        <form id="register-form">
          <h2>Register</h2>
          <input type="text" id="register-username" placeholder="Username" required />
          <input type="email" id="register-email" placeholder="Email" required />
          <input type="password" id="register-password" placeholder="Password" required />
          <select id="register-designation" required>
            <option value="" disabled selected>Select Designation</option>
            <option value="patient">Patient</option>
            <option value="doctor">Doctor</option>
          </select>
          <button type="submit" class="btn">Register</button>
          <p class="auth-message" id="register-message"></p>
        </form>
      </div>
    </div>

    <!-- Mode Selection -->
    <div id="mode-selection-screen" class="screen">
      <h1>Speechster X1</h1>
      <p>Welcome to the Speechster X1 Interface. Please select a mode to begin.</p>
      <hr />
      <div class="button-container">
        <button id="practice-mode-btn" class="btn">Practice</button>
        <button id="level-mode-btn" class="btn">Levels</button>
      </div>
      <hr />
      <div id="connection-status-container">
        <div id="device-light" class="red-light"></div>
        <span id="bluetooth-status">Disconnected</span>
      </div>
      <div class="bottom-buttons">
        <button id="bt-connect-btn" class="btn">Connect</button>
        <button id="patient-select-btn" class="btn">Select Patient</button>
        <button id="settings-btn" class="btn">Settings</button>
      </div>
      <button id="logout-btn" class="btn logout-btn">Log Out</button>
    </div>
    <!-- levels -->
    
    <div id="level-selection-screen" class="screen">
        <button id="level-selection-back" class="back-btn">&#8592;</button>
        <h1>Select a Level</h1>
        <p>Choose a Level to play</p>
        <hr />
        <div class="button-container">
          <button id="level-mode-btn-1" class="btn">Level 1</button>
          <button id="level-mode-btn-2" class="btn">Level 2</button>
        </div>
    </div>

    <!-- Practice -->
    <div id="practice-screen" class="screen">
      <button id="practice-back" class="back-btn">&#8592;</button>
      <h1>Practice Mode</h1>
      <p>Successfully make the sound told by your therapist.</p>
      <span class="score-display" id="practice-score">0</span>
    </div>

    <!-- Level 1 -->
    <div id="level-screen-1" class="screen">
      <button id="level-1-back" class="back-btn">&#8592;</button>
      <h1>Level 1: Tongue Sensor</h1>
      <p>Click "Start!" to start the 3-minute timer. The score will increase every time you touch the top part of your mouth.</p>
      <span class="timer" id="level-1-timer">03:00</span>
      <span class="score-display" id="level-1-score">0</span>
      <p id="level-1-feedback" class="feedback-message"></p>
      <div class="button-container">
        <button id="ready-btn" class="btn">Start!</button>
      </div>
    </div>

    <!-- Level 2 -->
    <div id="level-screen-2" class="screen">
      <button id="level-2-back" class="back-btn">&#8592;</button>
      <h1>Level 2: Word Recognition</h1>
      <p>Click "Start!" to begin the 1-minute timer. The word will change every time you successfully say the word specified.</p>
      <span class="timer" id="level-2-timer">01:00</span>
      <h2 id="current-word">hello</h2>
      <span class="score-display" id="level-2-score">0</span>
      <p id="level-2-feedback" class="feedback-message"></p>
      <div class="button-container">
        <button id="start-level-2" class="btn">Start!</button>
      </div>
    </div>

    <!-- Settings -->
    <div id="settings-screen" class="screen">
      <button id="settings-back" class="back-btn">&#8592;</button>
      <h1>Settings</h1>
      <p>Customize your experience.</p>
      <hr />
      <div class="button-container">
        <button id="light-mode-btn" class="btn">Light Mode</button>
        <button id="dark-mode-btn" class="btn">Dark Mode</button>
        <button id="sound-settings-btn" class="btn">Configure Sounds</button>
      </div>
    </div>

      <!-- Sound Control - Settings Subpage-->
    <div id="sound-settings" class="screen">
      <button id="sound-settings-back" class="back-btn">&#8592;</button>
      <h1>Sound Settings</h1>
      <p>Adjust the volume levels to your preference.</p>
      <hr />
      <div class="slider-card">
        <h2 class="slider-title">Master Volume Control</h2>
        <div class="slider-container">
          <input type="range" min="0" max="300" value="20" id="volume-slider">
        </div>
      </div>
    </div>
    
  <!-- Patient Selection Screen -->
   <div id="patient-selection-screen" class="screen">
      <button id="patient-selection-back" class="back-btn">&#8592;</button>
      <h1>Select Patient</h1>
      <p>Choose a patient to proceed.</p>
      <hr />
      <div id="patient-list" class="patient-list">
        <!-- Patient items will be dynamically added here -->
      </div>
    </div>

    <!-- Patient Dashboard -->
    <div id="patient-dashboard-screen" class="screen">
      <h1>Patient Dashboard</h1>
      <p>View Your Current Progress!</p>
      <hr />
      <div id="session-history">
        <h2>Session History</h2>
        <ul id="session-list">
          <!-- Session items will be dynamically added here -->
        </ul>
      </div>
      <button id="logout-btn" class="btn logout-btn" onclick="window.firebaseModules.handleLogout()">Log Out</button>

  </div>

  <!-- No User Found -->
   <div id="no-user-screen" class="screen">
      <h1>No User Found</h1>
      <p>Please register or login to continue.</p>
      <button id="logout-btn" class="btn" onclick="window.firebaseModules.handleLogout()">Go Back</button>
  </div>
  </div>

  <!-- Toast Container -->
  <div id="toast-container">
</div>

<script type="module" src="main.js"></script>
</body>
</html>